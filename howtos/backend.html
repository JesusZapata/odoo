<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <title>Construcción de un módulo &mdash; documentación de odoo - 9.0</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/patchqueue.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/patchqueue.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/doc.js"></script>
    <script type="text/javascript" src="../_static/jquery.noconflict.js"></script>
    <link rel="top" title="documentación de odoo - 9.0" href="../index.html" />
    <link rel="up" title="Tutoriales" href="../tutorials.html" />
    <link rel="next" title="Building Interface Extensions" href="web.html" />
    <link rel="prev" title="Building a Website" href="website.html" /> 
  </head>
  <body role="document"><header class="">
    <figure class="card top">
      <span class="card-img" style="background-image: url('../_static/banners/build_a_module.jpg');"></span>
    </figure>
  </header>
  <nav id="main_navbar" class="navbar ">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".navbar-main">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <nav class="nav navbar-nav navbar-left">
          <li id="main-back"><a href="../index.html" class="mdi-navigation-arrow-back"></a></li>
          <li>
            <h1 id="main_title">Construcción de un módulo</h1>
          </li>
        </nav>
      </div>

      <nav class="collapse navbar-collapse navbar-main navbar-right" role="navigation">
        
        <ul class="current navbar-nav navbar-right nav"><li class="toctree-l1 current dropdown"><a data-toggle="dropdown" href="../tutorials.html" class="dropdown-toggle internal reference">Tutoriales</a><ul class="current dropdown-menu"><li class="toctree-l2"><a href="themes.html" class="internal reference">Theme Tutorial</a></li><li class="toctree-l2"><a href="website.html" class="internal reference">Building a Website</a></li><li class="current toctree-l2"><a href="" class="current internal reference">Construcción de un módulo</a></li><li class="toctree-l2"><a href="web.html" class="internal reference">Building Interface Extensions</a></li></ul></li><li class="toctree-l1"><a href="../api_integration.html" class="internal reference">Servicios Web (API)</a><ul ></ul></li><li class="toctree-l1 dropdown"><a data-toggle="dropdown" href="../setup.html" class="dropdown-toggle internal reference">Setting Up</a><ul class="dropdown-menu"><li class="toctree-l2"><a href="../setup/install.html" class="internal reference">Installing Odoo</a></li><li class="toctree-l2"><a href="../setup/deploy.html" class="internal reference">Deploying Odoo</a></li><li class="toctree-l2"><a href="../setup/cdn.html" class="internal reference">Deploying with Content Delivery Networks</a></li><li class="toctree-l2"><a href="../setup/enterprise.html" class="internal reference">From Community to Enterprise</a></li></ul></li><li class="toctree-l1 dropdown"><a data-toggle="dropdown" href="../reference.html" class="dropdown-toggle internal reference">Referencia</a><ul class="dropdown-menu"><li class="toctree-l2"><a href="../reference/orm.html" class="internal reference">ORM API</a></li><li class="toctree-l2"><a href="../reference/data.html" class="internal reference">Data Files</a></li><li class="toctree-l2"><a href="../reference/actions.html" class="internal reference">Actions</a></li><li class="toctree-l2"><a href="../reference/views.html" class="internal reference">Views</a></li><li class="toctree-l2"><a href="../reference/module.html" class="internal reference">Modules</a></li><li class="toctree-l2"><a href="../reference/cmdline.html" class="internal reference">Command-line interface: odoo.py</a></li><li class="toctree-l2"><a href="../reference/security.html" class="internal reference">Security in Odoo</a></li><li class="toctree-l2"><a href="../reference/testing.html" class="internal reference">Testing Modules</a></li><li class="toctree-l2"><a href="../reference/http.html" class="internal reference">Web Controllers</a></li><li class="toctree-l2"><a href="../reference/qweb.html" class="internal reference">QWeb</a></li><li class="toctree-l2"><a href="../reference/javascript.html" class="internal reference">Javascript</a></li><li class="toctree-l2"><a href="../reference/translations.html" class="internal reference">Translating Modules</a></li><li class="toctree-l2"><a href="../reference/reports.html" class="internal reference">QWeb Reports</a></li><li class="toctree-l2"><a href="../reference/workflows.html" class="internal reference">Workflows</a></li><li class="toctree-l2"><a href="../reference/guidelines.html" class="internal reference">Odoo Guidelines</a></li><li class="toctree-l2"><a href="../reference/upgrade_api.html" class="internal reference">Upgrade API</a></li></ul></li><li class="toctree-l1 dropdown"><a data-toggle="dropdown" href="../business.html" class="dropdown-toggle internal reference">Mementos de Negocio.</a><ul class="dropdown-menu"><li class="toctree-l2"><a href="https://odoo.com/documentation/functional/accounting.html" class="external reference">Accounting Memento (US GAAP)</a></li><li class="toctree-l2"><a href="https://odoo.com/documentation/functional/double-entry.html" class="external reference">Double-Entry Inventory</a></li><li class="toctree-l2"><a href="https://odoo.com/documentation/functional/valuation.html" class="external reference">Inventory Valuations</a></li></ul></li></ul>
      </nav>
    </div>
  </nav>
    
  
  <main class="container ">
    
    <div class="row">
      
      <aside>
        <div class="navbar-aside text-center">
          <div class="logo_box">
            <span class="logo"></span>
            Documentation
          </div>
          <ul class="list-group text-left nav"><li class="list-group-item"><a href="#start-stop-the-odoo-server" class="ripple internal reference">Iniciar/parar el servidor Odoo</a></li><li class="list-group-item"><a href="#build-an-odoo-module" class="ripple internal reference">Construir un módulo de Odoo</a><ul ><li class="list-group-item"><a href="#composition-of-a-module" class="ripple internal reference">Composición de un módulo</a></li><li class="list-group-item"><a href="#module-structure" class="ripple internal reference">Estructura de un módulo</a></li><li class="list-group-item"><a href="#object-relational-mapping" class="ripple internal reference">Mapeo objeto-relacional (ORM)</a></li><li class="list-group-item"><a href="#model-fields" class="ripple internal reference">Campos en el Modelo</a><ul ><li class="list-group-item"><a href="#common-attributes" class="ripple internal reference">Atributos comunes</a></li><li class="list-group-item"><a href="#simple-fields" class="ripple internal reference">Campos Simples</a></li><li class="list-group-item"><a href="#reserved-fields" class="ripple internal reference">Campos reservados</a></li><li class="list-group-item"><a href="#special-fields" class="ripple internal reference">Campos Especiales</a></li></ul></li><li class="list-group-item"><a href="#data-files" class="ripple internal reference">Archivos de datos</a></li><li class="list-group-item"><a href="#actions-and-menus" class="ripple internal reference">Acciones y menús</a></li></ul></li><li class="list-group-item"><a href="#basic-views" class="ripple internal reference">Vistas Básicas</a><ul ><li class="list-group-item"><a href="#generic-view-declaration" class="ripple internal reference">Declaración de vista genérica</a></li><li class="list-group-item"><a href="#tree-views" class="ripple internal reference">Vistas de árbol</a></li><li class="list-group-item"><a href="#form-views" class="ripple internal reference">Vistas de formulario</a></li><li class="list-group-item"><a href="#search-views" class="ripple internal reference">Vistas de búsqueda</a></li></ul></li><li class="list-group-item"><a href="#relations-between-models" class="ripple internal reference">Relaciones entre modelos</a><ul ><li class="list-group-item"><a href="#relational-fields" class="ripple internal reference">Campos Relacionales</a></li></ul></li><li class="list-group-item"><a href="#inheritance" class="ripple internal reference">Herencia</a><ul ><li class="list-group-item"><a href="#model-inheritance" class="ripple internal reference">Herencia de modelos</a></li><li class="list-group-item"><a href="#view-inheritance" class="ripple internal reference">Herencia de vistas</a><ul ><li class="list-group-item"><a href="#domains" class="ripple internal reference">Dominios</a></li></ul></li></ul></li><li class="list-group-item"><a href="#computed-fields-and-default-values" class="ripple internal reference">Campos y valores calculados</a><ul ><li class="list-group-item"><a href="#dependencies" class="ripple internal reference">Dependencias</a></li><li class="list-group-item"><a href="#default-values" class="ripple internal reference">Valores por defecto</a></li></ul></li><li class="list-group-item"><a href="#onchange" class="ripple internal reference">Onchange</a></li><li class="list-group-item"><a href="#model-constraints" class="ripple internal reference">Restricciones</a></li><li class="list-group-item"><a href="#advanced-views" class="ripple internal reference">Advanced Views</a><ul ><li class="list-group-item"><a href="#id3" class="ripple internal reference">Vistas de árbol</a></li><li class="list-group-item"><a href="#calendars" class="ripple internal reference">Calendars</a></li><li class="list-group-item"><a href="#id4" class="ripple internal reference">Vistas de búsqueda</a></li><li class="list-group-item"><a href="#gantt" class="ripple internal reference">Gantt</a></li><li class="list-group-item"><a href="#graph-views" class="ripple internal reference">Graph views</a></li><li class="list-group-item"><a href="#kanban" class="ripple internal reference">Kanban</a></li></ul></li><li class="list-group-item"><a href="#workflows" class="ripple internal reference">Workflows</a></li><li class="list-group-item"><a href="#security" class="ripple internal reference">Security</a><ul ><li class="list-group-item"><a href="#group-based-access-control-mechanisms" class="ripple internal reference">Group-based access control mechanisms</a></li><li class="list-group-item"><a href="#access-rights" class="ripple internal reference">Access rights</a></li><li class="list-group-item"><a href="#record-rules" class="ripple internal reference">Record rules</a></li></ul></li><li class="list-group-item"><a href="#wizards" class="ripple internal reference">Wizards</a><ul ><li class="list-group-item"><a href="#launching-wizards" class="ripple internal reference">Launching wizards</a></li></ul></li><li class="list-group-item"><a href="#internationalization" class="ripple internal reference">Internationalization</a></li><li class="list-group-item"><a href="#reporting" class="ripple internal reference">Reporting</a><ul ><li class="list-group-item"><a href="#printed-reports" class="ripple internal reference">Printed reports</a></li><li class="list-group-item"><a href="#dashboards" class="ripple internal reference">Dashboards</a></li></ul></li><li class="list-group-item"><a href="#webservices" class="ripple internal reference">WebServices</a><ul ><li class="list-group-item"><a href="#xml-rpc-library" class="ripple internal reference">XML-RPC Library</a></li><li class="list-group-item"><a href="#json-rpc-library" class="ripple internal reference">JSON-RPC Library</a></li></ul></li></ul>
          
          <p class="gith-container"><a href="https://github.com/odoo/odoo/edit/9.0/doc/howtos/backend.rst" class="gith-link">
              Edit on GitHub
          </a></p>
          
        </div>
      </aside>
      
      <article class="doc-body ">
        
        
  <section id="building-a-module"><div role="alert" class="alert-warning alert"><p class="alert-title">Advertencia</p><p >Este tutorial requiere <a href="../setup/install.html#setup-install" class="internal alert-link reference"><span >haber instalado Odoo</span></a>
Este tutorial fué traducido al español por Vauxoo [<a href="http://www.vauxoo.com" class="external reference alert-link">http://www.vauxoo.com</a>] para sus cursos.
Cualquier sugerencia de mejora: enviarla a nhomar en vauxoo dot com.</p></div></section><section id="start-stop-the-odoo-server"><h2 >Iniciar/parar el servidor Odoo</h2><p >Odoo utiliza una arquitectura cliente/servidor en el que los clientes son los navegadores que acceden al servidor Odoo vía RPC.</p><p >Lógica de negocio y sus extensiones se realizan generalmente del lado del servidor, aunque se apoya en algunas características del cliente (por ejemplo, una representación de datos como mapas interactivos) puede ser añadida al cliente.</p><p >Para iniciar el servidor, simplemente invoca el comando <a href="../reference/cmdline.html#reference-cmdline" class="internal reference"><span >odoo.py</span></a> en la consola, agregar la ruta completa al archivo si es necesario:</p><div class="highlight-python code bash"><div class="highlight"><pre><span></span><span class="n">odoo</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p >El servidor se detiene pulsando <code >Ctrl-C</code> dos veces desde la terminal, o por matar el proceso correspondiente.</p></section><section id="build-an-odoo-module"><h2 >Construir un módulo de Odoo</h2><p >Las extensiones de servidor y cliente se empaquetan como <em >módulos</em> que opcionalmente se cargan en una <em >base de datos</em>.</p><p >Los módulos en Odoo pueden añadir nueva lógica de negocio a un sistema Odoo, o modificar y ampliar la lógica de negocios existente: puede crear un módulo para agregar las reglas de contabilidad de su país adicionándolo al soporte de contabilidad genérico de Odoo, mientras que otro módulo puede añadir soporte para la visualización en tiempo real de una flota de autobuses.</p><p >Todo en Odoo es así comienza y termina con módulos.</p></section><section id="composition-of-a-module"><h3 >Composición de un módulo</h3><p >Un módulo de Odoo puede contener una serie de elementos:</p><dl ><dt >Objetos de negocios</dt><dd ><p >declarado como clases de Python, estos recursos son automáticamente persistentes por Odoo basado en su configuración</p></dd><dt >Archivos de datos</dt><dd ><p >XML o CSV archivos declaran metadatos (vistas o flujos de trabajo), datos de configuración (parametrización de módulos), datos de demostración y más</p></dd><dt >Controladores Web</dt><dd ><p >Manejo de peticiones de los navegadores web</p></dd><dt >Datos estáticos Web</dt><dd ><p >Imágenes, CSS o javascript archivos utilizados por la interfaz web o página web</p></dd></dl></section><section id="module-structure"><h3 >Estructura de un módulo</h3><p >Cada módulo es un directorio dentro de un <em >directorio  de módulos</em>. Los directorios de módulos se especifican mediante la opción <a href="../reference/cmdline.html#cmdoption-odoo.py--addons-path" class="internal reference"><code class="std xref std-option">--addons-path</code></a>.</p><div role="alert" class="alert-info aphorism alert"><p class="alert-title">Truco</p><p >Puedes pre definir más opciones de línea de comandos mediante <a href="../reference/cmdline.html#reference-cmdline-config" class="internal alert-link reference"><span >un archivo de configuración</span></a></p></div><p >Un módulo de Odoo es declarado por su <a href="../reference/module.html#reference-module-manifest" class="internal reference"><span >manifiesto</span></a>. Ver la <a href="../reference/module.html#reference-module-manifest" class="internal reference"><span >Documentación del manifiesto</span></a>.</p><p >Un módulo es también un <a href="http://docs.python.org/2/tutorial/modules.html#packages" class="external reference">paquete de Python</a> con un archivo  <code >__init__.py</code>, que contiene instrucciones de importación de varios archivos de Python en dicho módulo.</p><p >Por ejemplo, un módulo puede contener solo un archivo <code >mymodule.py</code> y <code >__init__.py</code>:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">mymodule</span>
</pre></div>
</div>
<p >Odoo ofrece un mecanismo para ayudar a comenzar un nuevo módulo <a href="../reference/cmdline.html#reference-cmdline-server" class="internal reference"><span >odoo.py</span></a> es un subcomando <a href="../reference/cmdline.html#reference-cmdline-scaffold" class="internal reference"><span >scaffold</span></a>  para crear un módulo vacío:</p><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> odoo.py scaffold &lt;module name&gt; &lt;where to put it&gt;
</pre></div>
</div>
<p >El comando crea un subdirectorio para un módulo y automáticamente crea un montón de archivos estándar para dicho módulo. La mayoría de ellos contienen sólo código comentado o XML. A lo largo de este tutorial se explicará el uso de la mayoría de estos archivos.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Construcción de un módulo</p><p >Utilizar la línea de comandos anterior para crear un módulo vacío Open Academy e instalarlo en Odoo.</p></div></section><section id="object-relational-mapping"><h3 >Mapeo objeto-relacional (ORM)</h3><p >Un componente clave de Odoo el ORM <abbr title="Object-Relational Mapping). Esta capa evita tener que escribir más :abbr:`SQL (Structured Query Language">ORM</abbr> manualmente y proporciona extensibilidad y seguridad services<a href="#rawsql" class="footnote-ref" id="id1">2</a>.</p><p >Los objetos de negocio se declaran como clases de Python que  extienden <a href="../reference/orm.html#openerp.models.Model" class="internal reference" title="openerp.models.Model"><code class="py xref py-class">Model</code></a> que los integra en el sistema automatizado de persistencia.</p><p >Los modelos pueden configurarse mediante el establecimiento de una serie de atributos en su definición. El atributo más importante es <a href="../reference/orm.html#openerp.models.Model._name" class="internal reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a> el cual es requerido y define el nombre del modelo en Odoo. Aquí está una definición mínima de un modelo:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">openerp</span> <span class="kn">import</span> <span class="n">models</span>
<span class="k">class</span> <span class="nc">MinimalModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;test.model&#39;</span>
</pre></div>
</div>
</section><section id="model-fields"><h3 >Campos en el Modelo</h3><p >Los campos se utilizan para definir lo que puede almacenar el modelo y donde. Los campos se definen como atributos en la clase de modelo:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">openerp</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">fields</span>

<span class="k">class</span> <span class="nc">LessMinimalModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;test.model2&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>
</pre></div>
</div>
</section><section id="common-attributes"><h4 >Atributos comunes</h4><p >Mucho,  como el modelo de sí mismo, sus campos se pueden configurar, pasando los atributos de configuración como parámetros:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p >Algunos atributos están disponibles en todos los campos, aquí están los más comunes:</p><dl ><dt ><code class="py xref py-attr">string</code> (<code >unicode</code>, default: field's name)</dt><dd ><p >La etiqueta del campo en la interfaz del usuario (lo que el usuario leerá).</p></dd><dt ><code class="py xref py-attr">required</code> (<code >bool</code>, default: <code >False</code>)</dt><dd ><p >Si es <code >Verdadero</code>, el campo no puede estar vacío, deberá tener un valor predeterminado o siempre tendrás que asignar un valor al crear un registro.</p></dd><dt ><code class="py xref py-attr">help</code> (<code >unicode</code>, default: <code >''</code>)</dt><dd ><p >Formato largo, proporciona una información de ayuda en la interfaz de usuario.</p></dd><dt ><code class="py xref py-attr">index</code> (<code >bool</code>, default: <code >False</code>)</dt><dd ><p >Solicita la creación de un índice <a href="http://use-the-index-luke.com/sql/preface" class="external reference">database index</a> en la columna</p></dd></dl></section><section id="simple-fields"><h4 >Campos Simples</h4><p >hay dos categorías de tipos de campos: Los campos <em >“Simples”</em> los cuales simples valores atómicos directamente grabados en en la tabla correspondiente al modelo y los campos <em >“Relacionales”</em> los cuales enlazan registros (registros del mismo modelo o de diferentes modelos).</p><p >Ejemplo de campo simple son los <a href="../reference/orm.html#openerp.fields.Boolean" class="internal reference" title="openerp.fields.Boolean"><code class="py xref py-class">Boolean</code></a>, <a href="../reference/orm.html#openerp.fields.Date" class="internal reference" title="openerp.fields.Date"><code class="py xref py-class">Date</code></a>, <a href="../reference/orm.html#openerp.fields.Char" class="internal reference" title="openerp.fields.Char"><code class="py xref py-class">Char</code></a>.</p></section><section id="reserved-fields"><h4 >Campos reservados</h4><p >Odoo crea algunos campos en todos los modelos<a href="#autofields" class="footnote-ref" id="id2">1</a>. Estos campos son manejados por el sistema y no deberían ser escritos. Ellos pueden ser leídos si representan alguna utilidad o son necesarios:</p><dl ><dt ><code class="py xref py-attr">id</code> (<code class="py xref py-class">Id</code>)</dt><dd ><p >Identificador único para un registro en su modelo</p></dd><dt ><code class="py xref py-attr">create_date</code> (<a href="../reference/orm.html#openerp.fields.Datetime" class="internal reference" title="openerp.fields.Datetime"><code class="py xref py-class">Datetime</code></a>)</dt><dd ><p >fecha de creación del registro</p></dd><dt ><code class="py xref py-attr">create_uid</code> (<a href="../reference/orm.html#openerp.fields.Many2one" class="internal reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a>)</dt><dd ><p >usuario que creó el registro</p></dd><dt ><code class="py xref py-attr">write_date</code> (<a href="../reference/orm.html#openerp.fields.Datetime" class="internal reference" title="openerp.fields.Datetime"><code class="py xref py-class">Datetime</code></a>)</dt><dd ><p >Fecha de la última modificación del registro.</p></dd><dt ><code class="py xref py-attr">write_uid</code> (<a href="../reference/orm.html#openerp.fields.Many2one" class="internal reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a>)</dt><dd ><p >Último usuario que modificó el registro</p></dd></dl></section><section id="special-fields"><h4 >Campos Especiales</h4><p >Por defecto, Odoo también requiere un campo <code >name</code>  en todos los modelos para varios comportamientos de búsqueda y visualización. El campo utilizado para estos fines se puede reemplazar estableciendo <a href="../reference/orm.html#openerp.models.Model._rec_name" class="internal reference" title="openerp.models.Model._rec_name"><code class="py xref py-attr">_rec_name</code></a>.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Define un modelo</p><p >Definir un nuevo modelo de datos <em >curso</em> en el módulo <em >openacademy</em>. Un curso tiene un título y una descripción. Los cursos <em >deben</em> tener un título.</p></div></section><section id="data-files"><h3 >Archivos de datos</h3><p >Odoo es un sistema altamente dirigido por datos. Aunque el comportamiento personalizado utiliza una parte de código <a href="http://python.org" class="external reference">Python</a> el valor de un módulo está en los datos que éste establece cuando se carga.</p><div role="alert" class="alert-info aphorism alert"><p class="alert-title">Truco</p><p >algunos módulos existen únicamente para agregar datos a Odoo</p></div><p >Los datos del módulo son declarados vía <a href="../reference/data.html#reference-data" class="internal reference"><span >Archivos de Datos</span></a>, archivos XML con elementos <code >&lt;record&gt;</code>. Cada elemento <code >&lt;record&gt;</code> crea o actualiza datos en la base de datos.</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;openerp&gt;</span>
    <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;record</span> <span class="na">model=</span><span class="s">&quot;{model name}&quot;</span> <span class="na">id=</span><span class="s">&quot;{record identifier}&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;{a field name}&quot;</span><span class="nt">&gt;</span>{a value}<span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/record&gt;</span>
    <span class="nt">&lt;/data&gt;</span>
<span class="nt">&lt;openerp&gt;</span>
</pre></div>
</div>
<ul ><li ><p ><code >model</code> es el dentificador único (Nombre) para un registro en el modelo</p></li><li ><p ><code >id</code> es un :term: [UNKNOWN NODE title_reference], que permite referirse al registro (sin tener que conocer su identificador de base de datos)</p></li><li ><p ><code >&lt;field&gt;</code> los elementos tienen un <code >nombre</code> que es el nombre del campo en el modelo (por ejemplo,  <code >description</code>). Su cuerpo es el valor de campo.</p></li></ul><p >Los archivos de datos tienen que ser declarados en el archivo manifiesto para que puedan cargarse, ellos pueden ser declarados en la lista <code >'data'</code> (la cual siempre se carga) o en la lista <code >'demo'</code> (que se cargará solo cuando <em >modo demostración</em> esté habilitado).</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Definir los datos de demostración</p><p >Crear los datos de demostración llenando el model <em >Courses</em> con algunos pocos cursos.</p></div></section><section id="actions-and-menus"><h3 >Acciones y menús</h3><p >Acciones y menús son registros regulares en la base de datos, usualmente a través de archivos de datos. Las acciones pueden ser disparadas en tres formas:</p><ol ><li ><p >haciendo click en los menús (enlazados a una acción específica)</p></li><li ><p >haciendo click en botones en las vistas (si éstos están conectados a acciones)</p></li><li ><p >como acciones contextuales en el objeto</p></li></ol><p >Ya que los menús son algo complejos para declarar que hay un acceso directo <code >&lt;menuitem&gt;</code> para declarar un <code >ir.ui.menu</code> y así enlazarlo de forma más a la acción correspondiente.</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;record</span> <span class="na">model=</span><span class="s">&quot;ir.actions.act_window&quot;</span> <span class="na">id=</span><span class="s">&quot;action_list_ideas&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Ideas<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;res_model&quot;</span><span class="nt">&gt;</span>idea.idea<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;view_mode&quot;</span><span class="nt">&gt;</span>tree,form<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;/record&gt;</span>
<span class="nt">&lt;menuitem</span> <span class="na">id=</span><span class="s">&quot;menu_ideas&quot;</span> <span class="na">parent=</span><span class="s">&quot;menu_root&quot;</span> <span class="na">name=</span><span class="s">&quot;Ideas&quot;</span> <span class="na">sequence=</span><span class="s">&quot;10&quot;</span>
          <span class="na">action=</span><span class="s">&quot;action_list_ideas&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<div role="alert" class="alert-danger aphorism alert"><p class="alert-title">Peligro</p><p >La acción debe declararse antes de declarar el menú correspondiente en el archivo XML.</p><p >Los archivos de datos se ejecutan secuencialmente, el <code >id</code> de la acción debe estar presente en la base de datos antes de que se puede crear el menú.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Definir nuevas entradas de menú</p><p >Definir nuevas entradas de menú para acceder a cursos y sesiones en la entrada del menú OpenAcademy. Un usuario debe ser capaz de</p><ul ><li ><p >ver una lista de todos los cursos</p></li><li ><p >crear o modificar cursos</p></li></ul></div></section><section id="basic-views"><h2 >Vistas Básicas</h2><p >Las vistas definen el modo que se muestran los registros de un modelo. Cada tipo de vista representa un modo de visualización (una lista de registros, un gráfico,…). Las vistas o bien se pueden solicitar genéricamente a través de su tipo (por ejemplo, <em >una lista de la clientes</em>) o específicamente mediante su id. Para solicitudes genéricas, se utilizará la vista con el tipo y la prioridad más baja (por lo que la vista de la prioridad más baja de cada tipo es la vista predeterminada para ese tipo).</p><p ><a href="../reference/views.html#reference-views-inheritance" class="internal reference"><span >La herencia de Vistas</span></a> permite modificar vistas declaradas en otros lugares (agregar o quitar contenido).</p></section><section id="generic-view-declaration"><h3 >Declaración de vista genérica</h3><p >Una vista es declarada como un registro de el modelo <code >ir.ui.view</code>. El tipo de vista es implícita en el elemento raíz del campo <code >arch</code>:</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;record</span> <span class="na">model=</span><span class="s">&quot;ir.ui.view&quot;</span> <span class="na">id=</span><span class="s">&quot;view_id&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>view.name<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;model&quot;</span><span class="nt">&gt;</span>object_name<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;priority&quot;</span> <span class="na">eval=</span><span class="s">&quot;16&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;arch&quot;</span> <span class="na">type=</span><span class="s">&quot;xml&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- view content: &lt;form&gt;, &lt;tree&gt;, &lt;graph&gt;, ... --&gt;</span>
    <span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;/record&gt;</span>
</pre></div>
</div>
<div role="alert" class="alert-danger aphorism alert"><p class="alert-title">Peligro</p><p >El contenido de la vista es XML.</p><p >El campo <code >arch</code> debe ser declarado como <code >type =“xml”</code> para que sea analizado correctamente.</p></div></section><section id="tree-views"><h3 >Vistas de árbol</h3><p >Vistas de árbol, también llamados vistas de lista, mostrarán registros en un forma de tabla.</p><p >Su elemento raíz es <code >&lt;tree&gt;</code>. La forma más simple de la vista de árbol simplemente lista todos los campos a mostrar en la tabla (cada campo como una columna):</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;tree</span> <span class="na">string=</span><span class="s">&quot;Idea list&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;inventor_id&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/tree&gt;</span>
</pre></div>
</div>
</section><section id="form-views"><h3 >Vistas de formulario</h3><p >Formularios se utilizan para crear y editar registros individuales.</p><p >El elemento raíz es [UNKNOWN NODE title_reference]. Se compone de una estructura de alto nivel (groups, notebooks) y los elementos interactivos (botones y campos):</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;form</span> <span class="na">string=</span><span class="s">&quot;Idea form&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;group</span> <span class="na">colspan=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;group</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span> <span class="na">col=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;separator</span> <span class="na">string=</span><span class="s">&quot;General stuff&quot;</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;inventor_id&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/group&gt;</span>

        <span class="nt">&lt;group</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span> <span class="na">col=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;separator</span> <span class="na">string=</span><span class="s">&quot;Dates&quot;</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;active&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;invent_date&quot;</span> <span class="na">readonly=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/group&gt;</span>

        <span class="nt">&lt;notebook</span> <span class="na">colspan=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;page</span> <span class="na">string=</span><span class="s">&quot;Description&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">nolabel=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/page&gt;</span>
        <span class="nt">&lt;/notebook&gt;</span>

        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;state&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/group&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Personalizar vista de formulario usando XML</p><p >Crear una vista formulario propia para el objeto <code >Course</code>. Los datos mostrados deben ser: el nombre y la descripción del curso.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Notebooks</p><p >En la vista formulario de un curso, poner el campo <code >description</code> en una pestaña, que será más fácil añadir más tarde, otras pestaña contiene la información adicional.</p></div><p >Vistas de formulario también pueden utilizar HTML plano para diseños más flexibles:</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;form</span> <span class="na">string=</span><span class="s">&quot;Idea Form&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;header&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">string=</span><span class="s">&quot;Confirm&quot;</span> <span class="na">type=</span><span class="s">&quot;object&quot;</span> <span class="na">name=</span><span class="s">&quot;action_confirm&quot;</span>
                <span class="na">states=</span><span class="s">&quot;draft&quot;</span> <span class="na">class=</span><span class="s">&quot;oe_highlight&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">string=</span><span class="s">&quot;Mark as done&quot;</span> <span class="na">type=</span><span class="s">&quot;object&quot;</span> <span class="na">name=</span><span class="s">&quot;action_done&quot;</span>
                <span class="na">states=</span><span class="s">&quot;confirmed&quot;</span> <span class="na">class=</span><span class="s">&quot;oe_highlight&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">string=</span><span class="s">&quot;Reset to draft&quot;</span> <span class="na">type=</span><span class="s">&quot;object&quot;</span> <span class="na">name=</span><span class="s">&quot;action_draft&quot;</span>
                <span class="na">states=</span><span class="s">&quot;confirmed,done&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;state&quot;</span> <span class="na">widget=</span><span class="s">&quot;statusbar&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/header&gt;</span>
    <span class="nt">&lt;sheet&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;oe_title&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;name&quot;</span> <span class="na">class=</span><span class="s">&quot;oe_edit_only&quot;</span> <span class="na">string=</span><span class="s">&quot;Idea Name&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;h1&gt;&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="nt">/&gt;&lt;/h1&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;separator</span> <span class="na">string=</span><span class="s">&quot;General&quot;</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;group</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span> <span class="na">col=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Idea description...&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/group&gt;</span>
    <span class="nt">&lt;/sheet&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
</section><section id="search-views"><h3 >Vistas de búsqueda</h3><p >Vistas de búsqueda personaliza los campos de búsqueda asociado con la vista de lista (y otras vistas agregadas). Su elemento raíz es <code >&lt;search&gt;</code> y están compuesto por campos que definen los campos por los que se pueden buscar:</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;search&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;inventor_id&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/search&gt;</span>
</pre></div>
</div>
<p >Si no existe ninguna vista de búsqueda para el modelo, Odoo genera que automáticamente permite la búsqueda en el campo <code >name</code>.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Buscar Cursos</p><p >Permite buscar cursos basados por el título o la descripción.</p></div></section><section id="relations-between-models"><h2 >Relaciones entre modelos</h2><p >Un registro de un modelo puede estar relacionada con un registro de otro modelo. Por ejemplo, un registro de orden de venta se relaciona con un registro de cliente que contiene los datos del cliente; también está relacionado con los registros de línea de orden de venta.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Crear un modelo <code >Session</code></p><p >Para el módulo Open Academy, consideramos un modelo <em >sessions</em>: una sesión es la cuando un curso es impartido en un momento dado para un público determinado.</p><p >Crear un modelo para <em >sessions</em>. Una sesión tiene un nombre, una fecha de inicio, una duración y un número de asientos. Agregue una acción y un elemento de menú a los mismos. Visibilizar el nuevo modelo a través de un menú.</p></div></section><section id="relational-fields"><h3 >Campos Relacionales</h3><p >Los campos relacionales vinculan registros, ya sea del mismo modelo (jerarquías) o entre diferentes modelos.</p><p >Los tipos de campos relacionales son:</p><dl ><dt ><a href="../reference/orm.html#openerp.fields.Many2one" class="internal reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one(other_model, ondelete='set null')</code></a></dt><dd ><p >Un simple enlace a otro objeto:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span> <span class="n">foo</span><span class="o">.</span><span class="n">other_id</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<div role="alert" class="alert-info alert"><p class="alert-title">Ver también</p><p ><a href="http://www.postgresql.org/docs/9.3/static/tutorial-fk.html" class="external reference alert-link">foreign keys</a></p></div></dd><dt ><a href="../reference/orm.html#openerp.fields.One2many" class="internal reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many(other_model, related_field)</code></a></dt><dd ><p >Una relación virtual, inverso a un <a href="../reference/orm.html#openerp.fields.Many2one" class="internal reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a>. Un <a href="../reference/orm.html#openerp.fields.One2many" class="internal reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a> se comporta como contenedor de los registros, el acceso se traduce en un conjunto (posiblemente vacío) de los registros:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">foo</span><span class="o">.</span><span class="n">other_ids</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<div role="alert" class="alert-danger alert"><p class="alert-title">Peligro</p><p >Debido a que un <a href="../reference/orm.html#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a> es una relación virtual, <em >debe</em> haber un campo <a href="../reference/orm.html#openerp.fields.Many2one" class="internal alert-link reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a> en <code class="samp"><em >other_model</em></code>, y su nombre <em >debe ser</em>  <code class="samp"><em >related_field</em></code>.</p></div></dd><dt ><a href="../reference/orm.html#openerp.fields.Many2many" class="internal reference" title="openerp.fields.Many2many"><code class="py xref py-class">Many2many(other_model)</code></a></dt><dd ><p >Relación bidireccional múltiple, cualquier registro en un lado puede estar relacionada con cualquier número de registros en el otro lado. Se comporta como un contenedor de registros, al acceder a él también se puede traducir en una lista vacía de registros:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">foo</span><span class="o">.</span><span class="n">other_ids</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</dd></dl><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Relaciones Many2one</p><p >Usando un many2one, modificar los modelos <em >Course</em> y <em >Session</em>  para reflejar su relación con otros modelos:</p><ul ><li ><p >Un curso tiene un usuario <em >responsible</em>; el valor de ese campo es un registro del modelo integrado <code >res.users</code>.</p></li><li ><p >Una sesión tiene un <em >instructor</em>; el valor de ese campo es un registro del modelo integrado <code >res.partner</code>.</p></li><li ><p >Una sesión se refiere a un <em >course</em>; el valor de ese campo es un registro del modelo <code >openacademy.course</code> y es requerido.</p></li><li ><p >Adaptar las vistas.</p></li></ul></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Relaciones One2Many inversas</p><p >Utilizando el campo relacional inverso one2many, modificar los modelos para reflejar la relación entre los cursos y sesiones.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Relaciones Many2Many múltiples</p><p >Utilizando el campo relacional Many2Many, modificar el modelo de <em >Session</em> relacionar cada sesión a un conjunto de <em >attendees</em>. Los asistentes estarán representados por los registros <em >partners</em>, por lo que se relacionan con el modelo <code >res.partner</code>. Adaptar las vistas en consecuencia.</p></div></section><section id="inheritance"><h2 >Herencia</h2></section><section id="model-inheritance"><h3 >Herencia de modelos</h3><p >Odoo proporciona dos mecanismos de <em >herencia</em> para extender un modelo existente de forma modular.</p><p >El primer mecanismo de herencia permite a un módulo modificar el comportamiento de un modelo definido en otro módulo:</p><ul ><li ><p >agregar campos a un modelo,</p></li><li ><p >sobre escribir la definición de campos en un modelo,</p></li><li ><p >añadir restricciones a un modelo,</p></li><li ><p >añadir métodos a un modelo,</p></li><li ><p >reemplazar los métodos existentes en un modelo.</p></li></ul><p >El segundo mecanismo de herencia (delegación) permite vincular cada registro de un modelo para un registro en un modelo de matriz, y proporciona un acceso transparente a los campos del registro padre.</p><img src="../_images/inheritance_methods.png" class="img-responsive center-block"><div role="alert" class="alert-info alert"><p class="alert-title">Ver también</p><ul ><li ><a href="../reference/orm.html#openerp.models.Model._inherit" class="internal alert-link reference" title="openerp.models.Model._inherit"><code class="py xref py-attr">_inherit</code></a></li><li ><a href="../reference/orm.html#openerp.models.Model._inherits" class="internal alert-link reference" title="openerp.models.Model._inherits"><code class="py xref py-attr">_inherits</code></a></li></ul></div></section><section id="view-inheritance"><h3 >Herencia de vistas</h3><p >En lugar de modificar las vistas existentes en el lugar (sobre escribiéndolos), Odoo proporciona herencia de vistas, donde las vistas hijas <code >extensión</code> se aplican en la parte superior de la vista de la raíz, y se pueden añadir o eliminar contenido de sus padres.</p><p >Una vista de extensión hace referencia a su padre con el campo <code >inherit_id</code>, y en lugar de una vista el campo <code >arch</code> se compone de cualquier número de <code >xpath</code>, elementos que seleccionan y modifican el contenido de su vista padre:</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- improved idea categories list --&gt;</span>
<span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;idea_category_list2&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.ui.view&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>id.category.list2<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;model&quot;</span><span class="nt">&gt;</span>idea.category<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;inherit_id&quot;</span> <span class="na">ref=</span><span class="s">&quot;id_category_list&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;arch&quot;</span> <span class="na">type=</span><span class="s">&quot;xml&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- find field description and add the field</span>
<span class="c">             idea_ids after it --&gt;</span>
        <span class="nt">&lt;xpath</span> <span class="na">expr=</span><span class="s">&quot;//field[@name=&#39;description&#39;]&quot;</span> <span class="na">position=</span><span class="s">&quot;after&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;idea_ids&quot;</span> <span class="na">string=</span><span class="s">&quot;Number of ideas&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xpath&gt;</span>
    <span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;/record&gt;</span>
</pre></div>
</div>
<dl ><dt ><code >expr</code></dt><dd ><p >Una expresión <a href="http://w3.org/TR/xpath" class="external reference">XPath</a> es la selección de un solo elemento en la vista padre. Genera un error si no coincide con ningún elemento o más de uno</p></dd><dt ><code >position</code></dt><dd ><p >Operación de aplicar al elemento coincidente:</p><dl ><dt ><code >inside</code></dt><dd ><p >anexa <code >cuerpo de xpath</code> en el extremo del elemento emparejado</p></dd><dt ><code >replace</code></dt><dd ><p >sustituye el elemento emparejado por el cuerpo de <code >xpath</code></p></dd><dt ><code >before</code></dt><dd ><p >inserta el cuerpo del <code >xpath</code> como un hermano antes del elemento emparejado</p></dd><dt ><code >after</code></dt><dd ><p >inserta el cuerpo de <code >xpaths</code> como un hermano después de que el elemento emparejado</p></dd><dt ><code >attributes</code></dt><dd ><p >altera los atributos del elemento coincidente utilizando elementos <code >attribute</code> especiales en el cuerpo de <code >xpath</code></p></dd></dl></dd></dl><div role="alert" class="alert-info alert"><p class="alert-title">Truco</p><p >En la concordancia de un solo elemento, el atributo <code >position</code> se puede establecer directamente sobre el elemento que se encuentra. Ambas herencias a continuación le dará el mismo resultado.</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xpath</span> <span class="na">expr=</span><span class="s">&quot;//field[@name=&#39;description&#39;]&quot;</span> <span class="na">position=</span><span class="s">&quot;after&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;idea_ids&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/xpath&gt;</span>

<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">position=</span><span class="s">&quot;after&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;idea_ids&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/field&gt;</span>
</pre></div>
</div>
</div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Alterar el contenido existente</p><ul ><li ><p >Utilizando el modelo de herencia, modificar el modelo <em >Partner</em> y añadir un campo boolean llamado <code >Instructor</code> y un campo many2many que correspondería a la relación de session-partner</p></li><li ><p >Mediante herencia de vista, mostrar este campo en la vista Formulario de <em >partner</em></p></li></ul></div></section><section id="domains"><h4 >Dominios</h4><p >En Odoo, <a href="../reference/orm.html#reference-orm-domains" class="internal reference"><span >Domains</span></a> son valores que representan condiciones en los registros. Un dominio es una lista de criterios utilizados para seleccionar un subconjunto de registros de un modelo. Cada criterio es una tripleta con un nombre de campo, un operador y un valor.</p><p >Por ejemplo, cuando se usa en el modelo <em >product</em> el siguiente dominio selecciona todos los <em >services</em> con un precio unitario mayor <em >1000</em>:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;product_type&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;service&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;unit_price&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)]</span>
</pre></div>
</div>
<p >Por defecto se combinan criterios con un implícito AND. Los operadores lógicos <code >&amp;</code> (AND), <code >|</code> (OR) and <code >!</code> se puede utilizar para combinar explícitamente criterios. Se utilizan en posición de prefijo (el operador se inserta antes de sus argumentos, y no entre). Por ejemplo para seleccionar productos “que son los servicios * OR * tienen un precio unitario que es * no * entre 1000 y 2000”:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;|&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;product_type&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;service&#39;</span><span class="p">),</span>
    <span class="s1">&#39;!&#39;</span><span class="p">,</span> <span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
        <span class="p">(</span><span class="s1">&#39;unit_price&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;unit_price&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)]</span>
</pre></div>
</div>
<p >Un parámetro <code >dominio</code> puede añadirse campos relacionales para limitar registros válidos para esa relación cuando se intenta seleccionar registros la interfaz del cliente.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Dominios en campos relacionales</p><p >Al seleccionar el instructor para una <em >session</em>, sólo éstos pueden ser instructores (Partner los cuales el campo <code >Instuctor</code> es <code >True</code>) por consiguiente solo éstos deben ser visibles.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Dominios más complejos</p><p >Crear un par de nuevas categorías <em >Teacher / Level 1</em> y <em >Teacher / Level 2</em>. El instructor de una sesión puede ser un <em >instructor</em> o un profesor (<em >de cualquier nivel</em>).</p></div></section><section id="computed-fields-and-default-values"><h2 >Campos y valores calculados</h2><p >Hasta ahora los campos han sido almacenados y obtenidos directamente de la base de datos. Los campos también pueden ser <em >calculados</em>. En ese caso, el valor del campo no es obtenido de la base de datos sino calculado al vuelo llamando a un método en el modelo.</p><p >Para crear un campo calculado, cree un campo y establezca su atributo: <code class="py xref py-attr">compute</code> con el nombre del método. El método de cómputo simplemente debe establecer el valor del campo calculado en cada registro en <code >self</code>.</p><div role="alert" class="alert-danger aphorism alert"><p class="alert-title">Peligro</p><p ><code >self`</code> es una colección (collection)</p><p >El objeto <code >self`</code> es un <em >recordset</em>, es decir, una colección ordenada de registros. Es compatible con las operaciones estándar de Python en colecciones, como <code >len(self)</code> y <code >iter(self)</code>, además de operaciones extra set como <code >recs1 + recs2</code>.</p><p >Iterando sobre <code >self</code> los registros uno por uno, donde cada registro es una colección de tamaño 1. Puedes acceder/asignar campos a registros individuales mediante el uso de la notación de puntos, algo así <code >record.name</code>.</p></div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">openerp</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">api</span>

<span class="k">class</span> <span class="nc">ComputedModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;test.computed&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_name&#39;</span><span class="p">)</span>

    <span class="nd">@api.multi</span>
    <span class="k">def</span> <span class="nf">_compute_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">))</span>
</pre></div>
</div>
</section><section id="dependencies"><h3 >Dependencias</h3><p >El valor de un campo calculado generalmente depende de los valores de otros campos en el registro computado. El ORM espera que el programador  especifique estas dependencias en el método de cálculo con el decorador <a href="../reference/orm.html#openerp.api.depends" class="internal reference" title="openerp.api.depends"><code class="py xref py-func">depends()</code></a>. Las dependencias dadas son utilizadas por el ORM para desencadenar el recálculo del campo cada vez que se han modificado algunas de sus dependencias:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">openerp</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">api</span>

<span class="k">class</span> <span class="nc">ComputedModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;test.computed&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_name&#39;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>

    <span class="nd">@api.depends</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_compute_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Record with value </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Campos y valores calculados</p><ul ><li ><p >Agregar el porcentaje de plazas tomadas para el modelo <em >session</em></p></li><li ><p >Muestra ese campo en la vista de árbol y forma</p></li><li ><p >Mostrar el campo como una barra de progreso</p></li></ul></div></section><section id="default-values"><h3 >Valores por defecto</h3><p >Cualquier campo puede dar un valor por defecto. En la definición de campo, agregue la opción ‘’ default = X’’ ‘’ X’’ sea un Python valor literal (boolean, integer, float, string), o una función toma un conjunto de registros y devolver un valor:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s1">&#39;res.users&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<div role="alert" class="alert-info alert"><p class="alert-title">Nota</p><p >El objeto <code >self.env</code> da acceso a solicitar parámetros y otras cosas útiles:</p><ul ><li ><p ><code >self.env.cr</code> o <code >self._cr</code> es el objeto <em >cursor</em> la base de datos; se utiliza para consultar la base de datos</p></li><li ><p ><code >self.env.uid</code> o <code >self._uid</code> es el id de la base de datos del usuario actual</p></li><li ><p ><code >self.env.user</code> es el registro del usuario actual</p></li><li ><p ><code >self.env.context</code> o <code >self._context</code> es el Diccionario de contexto</p></li><li ><p ><code >self.env.ref(xml_id)</code> devuelve el registro correspondiente a un id XML</p></li><li ><p ><code >self.env[model_name]</code> devuelve una instancia del modelo dado</p></li></ul></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Objetos activos – valores por defecto</p><ul ><li ><p >Definir el valor por defecto de start_date como hoy (ver <a href="../reference/orm.html#openerp.fields.Date" class="internal alert-link reference" title="openerp.fields.Date"><code class="py xref py-class">Date</code></a>).</p></li><li ><p >Agregue un campo <code >active</code> en la clase de Session y haga las sesiones activas por defecto.</p></li></ul></div></section><section id="onchange"><h2 >Onchange</h2><p >El mecanismo &quot;onchange&quot; proporciona una forma para que la interfaz del cliente actualice los datos de un formulario cuando el usuario ha llenado en un valor en un campo, sin guardar nada en la base de datos.</p><p >Por ejemplo, supongamos que un modelo tiene tres campos <code >amount</code>, <code >unit_price</code> y <code >price</code>, y desea actualizar el precio si cualquiera de los otros campos se modifica. Para ello, defines un método donde <code >self</code> representa el registro en la vista formulario y lo decoras con <a href="../reference/orm.html#openerp.api.onchange" class="internal reference" title="openerp.api.onchange"><code class="py xref py-func">onchange()</code></a> para especificar en qué campo se activará. Cualquier cambio que realice en <code >self</code> se reflejará en el formulario.</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- content of form view --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;amount&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;unit_price&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;price&quot;</span> <span class="na">readonly=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># onchange handler</span>
<span class="nd">@api.onchange</span><span class="p">(</span><span class="s1">&#39;amount&#39;</span><span class="p">,</span> <span class="s1">&#39;unit_price&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_onchange_price</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># set auto-changing field</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_price</span>
    <span class="c1"># Can optionally return a warning and domains</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;warning&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;Something bad happened&quot;</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;It was very bad indeed&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p >Para campos calculados, el comportamiento <code >onchange</code> está incorporado como se aprecia al jugar con el formulario de una <em >Sessión</em>: cambia el número de asientos o los participantes, y se actualiza automáticamente el progressbar de <code >taken_seats</code>.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >¡Cuidado!</p><p >Añadir un onchange explícito para advertir sobre valores no válidos, como un número negativo de asientos o más participantes que asientos.</p></div></section><section id="model-constraints"><h2 >Restricciones</h2><p >Odoo ofrece dos formas de configurar automáticamente invariantes: <a href="../reference/orm.html#openerp.api.constrains" class="internal reference" title="openerp.api.constrains"><code class="py xref py-func">Python constraints</code></a> y <a href="../reference/orm.html#openerp.models.Model._sql_constraints" class="internal reference" title="openerp.models.Model._sql_constraints"><code class="py xref py-attr">SQL constraints</code></a>.</p><p >Una restricción de Python se define como un método decorado con <a href="../reference/orm.html#openerp.api.constrains" class="internal reference" title="openerp.api.constrains"><code class="py xref py-func">constrains()</code></a> y es invocado en un <em >recordset</em>. El decorador especifica los campos que están involucrados en la restricción, por lo que la restricción se evalúa automáticamente cuando se modifica uno de ellos. El método levantará una excepción si no se satisface su invariante:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">openerp.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span>

<span class="nd">@api.constrains</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_check_something</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Your record is too old: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">record</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
    <span class="c1"># all records passed the test, don&#39;t return anything</span>
</pre></div>
</div>
<div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Agregar restricciones de Python</p><p >Agregar una restricción que comprueba que el instructor no está presente en los asistentes de su propia sesión.</p></div><p >SQL constraints are defined through the model attribute
<a href="../reference/orm.html#openerp.models.Model._sql_constraints" class="internal reference" title="openerp.models.Model._sql_constraints"><code class="py xref py-attr">_sql_constraints</code></a>. The latter is assigned to a list
of triples of strings <code >(name, sql_definition, message)</code>, where <code >name</code> is a
valid SQL constraint name, <code >sql_definition</code> is a <a href="http://www.postgresql.org/docs/9.3/static/ddl-constraints.html" class="external reference">table_constraint</a> expression,
and <code >message</code> is the error message.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Add SQL constraints</p><p >With the help of <a href="http://www.postgresql.org/docs/9.3/static/ddl-constraints.html" class="external reference alert-link">PostgreSQL's documentation</a> , add the following
constraints:</p><ol ><li >CHECK that the course description and the course title are different</li><li >Make the Course's name UNIQUE</li></ol></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Exercise 6 - Add a duplicate option</p><p >Since we added a constraint for the Course name uniqueness, it is not
possible to use the &quot;duplicate&quot; function anymore (<span class="menuselection">Form ‣
Duplicate</span>).</p><p >Re-implement your own &quot;copy&quot; method which allows to duplicate the Course
object, changing the original name into &quot;Copy of [original name]&quot;.</p></div></section><section id="advanced-views"><h2 >Advanced Views</h2></section><section id="id3"><h3 >Vistas de árbol</h3><p >Tree views can take supplementary attributes to further customize their
behavior:</p><dl ><dt ><code >colors</code></dt><dd ><div class="deprecated"><p ><span class="versionmodified">Obsoleto desde la versión 9.0: </span>replaced by <code >decoration-{$name}</code></p></div></dd><dt ><code >decoration-{$name}</code></dt><dd ><p >allow changing the style of a row's text based on the corresponding
record's attributes.</p><p >Values are Python expressions. For each record, the expression is evaluated
with the record's attributes as context values and if <code >true</code>, the
corresponding style is applied to the row. Other context values are
<code >uid</code> (the id of the current user) and <code >current_date</code> (the current date
as a string of the form <code >yyyy-MM-dd</code>).</p><p ><code >{$name}</code> can be <code >bf</code> (<code >font-weight: bold</code>), <code >it</code>
(<code >font-style: italic</code>), or any bootstrap contextual color (<code >danger</code>,
<code >info</code>, <code >muted</code>, <code >primary</code>, <code >success</code> or <code >warning</code>).</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;tree</span> <span class="na">string=</span><span class="s">&quot;Idea Categories&quot;</span> <span class="na">decoration-info=</span><span class="s">&quot;state==&#39;draft&#39;&quot;</span>
    <span class="na">decoration-danger=</span><span class="s">&quot;state==&#39;trashed&#39;&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;state&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/tree&gt;</span>
</pre></div>
</div>
</dd><dt ><code >editable</code></dt><dd >Either <code >&quot;top&quot;</code> or <code >&quot;bottom&quot;</code>. Makes the tree view editable in-place
(rather than having to go through the form view), the value is the
position where new rows appear.</dd></dl><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >List coloring</p><p >Modify the Session tree view in such a way that sessions lasting less than
5 days are colored blue, and the ones lasting more than 15 days are
colored red.</p></div></section><section id="calendars"><h3 >Calendars</h3><p >Displays records as calendar events. Their root element is <code >&lt;calendar&gt;</code> and
their most common attributes are:</p><dl ><dt ><code >color</code></dt><dd >The name of the field used for <em >color segmentation</em>. Colors are
automatically distributed to events, but events in the same color segment
(records which have the same value for their <code >@color</code> field) will be
given the same color.</dd><dt ><code >date_start</code></dt><dd >record's field holding the start date/time for the event</dd><dt ><code >date_stop</code> (optional)</dt><dd >record's field holding the end date/time for the event</dd></dl><p >field (to define the label for each calendar event)</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;calendar</span> <span class="na">string=</span><span class="s">&quot;Ideas&quot;</span> <span class="na">date_start=</span><span class="s">&quot;invent_date&quot;</span> <span class="na">color=</span><span class="s">&quot;inventor_id&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/calendar&gt;</span>
</pre></div>
</div>
<div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Calendar view</p><p >Add a Calendar view to the <em >Session</em> model enabling the user to view the
events associated to the Open Academy.</p></div></section><section id="id4"><h3 >Vistas de búsqueda</h3><p >Search view <code >&lt;field&gt;</code> elements can have a <code >@filter_domain</code> that overrides
the domain generated for searching on the given field. In the given domain,
<code >self</code> represents the value entered by the user. In the example below, it is
used to search on both fields <code >name</code> and <code >description</code>.</p><p >Search views can also contain <code >&lt;filter&gt;</code> elements, which act as toggles for
predefined searches. Filters must have one of the following attributes:</p><dl ><dt ><code >domain</code></dt><dd >add the given domain to the current search</dd><dt ><code >context</code></dt><dd >add some context to the current search; use the key <code >group_by</code> to group
results on the given field name</dd></dl><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;search</span> <span class="na">string=</span><span class="s">&quot;Ideas&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">string=</span><span class="s">&quot;Name and description&quot;</span>
           <span class="na">filter_domain=</span><span class="s">&quot;[&#39;|&#39;, (&#39;name&#39;, &#39;ilike&#39;, self), (&#39;description&#39;, &#39;ilike&#39;, self)]&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;inventor_id&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;country_id&quot;</span> <span class="na">widget=</span><span class="s">&quot;selection&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;filter</span> <span class="na">name=</span><span class="s">&quot;my_ideas&quot;</span> <span class="na">string=</span><span class="s">&quot;My Ideas&quot;</span>
            <span class="na">domain=</span><span class="s">&quot;[(&#39;inventor_id&#39;, &#39;=&#39;, uid)]&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;group</span> <span class="na">string=</span><span class="s">&quot;Group By&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;filter</span> <span class="na">name=</span><span class="s">&quot;group_by_inventor&quot;</span> <span class="na">string=</span><span class="s">&quot;Inventor&quot;</span>
                <span class="na">context=</span><span class="s">&quot;{&#39;group_by&#39;: &#39;inventor_id&#39;}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/group&gt;</span>
<span class="nt">&lt;/search&gt;</span>
</pre></div>
</div>
<p >To use a non-default search view in an action, it should be linked using the
<code >search_view_id</code> field of the action record.</p><p >The action can also set default values for search fields through its
<code >context</code> field: context keys of the form
<code class="samp">search_default_<em >field_name</em></code> will initialize <em >field_name</em> with the
provided value. Search filters must have an optional <code >@name</code> to have a
default and behave as booleans (they can only be enabled by default).</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Vistas de búsqueda</p><ol ><li >Add a button to filter the courses for which the current user is the
responsible in the course search view. Make it selected by default.</li><li >Add a button to group courses by responsible user.</li></ol></div></section><section id="gantt"><h3 >Gantt</h3><p >Horizontal bar charts typically used to show project planning and advancement,
their root element is <code >&lt;gantt&gt;</code>.</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;gantt</span> <span class="na">string=</span><span class="s">&quot;Ideas&quot;</span>
       <span class="na">date_start=</span><span class="s">&quot;invent_date&quot;</span>
       <span class="na">date_stop=</span><span class="s">&quot;date_finished&quot;</span>
       <span class="na">progress=</span><span class="s">&quot;progress&quot;</span>
       <span class="na">default_group_by=</span><span class="s">&quot;inventor_id&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Gantt charts</p><p >Add a Gantt Chart enabling the user to view the sessions scheduling linked
to the Open Academy module. The sessions should be grouped by instructor.</p></div></section><section id="graph-views"><h3 >Graph views</h3><p >Graph views allow aggregated overview and analysis of models, their root
element is <code >&lt;graph&gt;</code>.</p><div role="alert" class="alert-info alert"><p class="alert-title">Nota</p><p >Pivot views (element <code >&lt;pivot&gt;</code>) a multidimensional table, allows the
selection of filers and dimensions to get the right aggregated dataset
before moving to a more graphical overview. The pivot view shares the same
content definition as graph views.</p></div><p >Graph views have 4 display modes, the default mode is selected using the
<code >@type</code> attribute.</p><dl ><dt >Bar (default)</dt><dd ><p >a bar chart, the first dimension is used to define groups on the
horizontal axis, other dimensions define aggregated bars within each group.</p><p >By default bars are side-by-side, they can be stacked by using
<code >@stacked=&quot;True&quot;</code> on the <code >&lt;graph&gt;</code></p></dd><dt >Line</dt><dd >2-dimensional line chart</dd><dt >Pie</dt><dd >2-dimensional pie</dd></dl><p >Graph views contain <code >&lt;field&gt;</code> with a mandatory <code >@type</code> attribute taking
the values:</p><dl ><dt ><code >row</code> (default)</dt><dd >the field should be aggregated by default</dd><dt ><code >measure</code></dt><dd >the field should be aggregated rather than grouped on</dd></dl><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;graph</span> <span class="na">string=</span><span class="s">&quot;Total idea score by Inventor&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;inventor_id&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;score&quot;</span> <span class="na">type=</span><span class="s">&quot;measure&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/graph&gt;</span>
</pre></div>
</div>
<div role="alert" class="alert-warning alert"><p class="alert-title">Advertencia</p><p >Graph views perform aggregations on database values, they do not work
with non-stored computed fields.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Graph view</p><p >Add a Graph view in the Session object that displays, for each course, the
number of attendees under the form of a bar chart.</p></div></section><section id="kanban"><h3 >Kanban</h3><p >Used to organize tasks, production processes, etc… their root element is
<code >&lt;kanban&gt;</code>.</p><p >A kanban view shows a set of cards possibly grouped in columns. Each card
represents a record, and each column the values of an aggregation field.</p><p >For instance, project tasks may be organized by stage (each column is a
stage), or by responsible (each column is a user), and so on.</p><p >Kanban views define the structure of each card as a mix of form elements
(including basic HTML) and <a href="../reference/qweb.html#reference-qweb" class="internal reference"><span >QWeb</span></a>.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Kanban view</p><p >Add a Kanban view that displays sessions grouped by course (columns are
thus courses).</p></div></section><section id="workflows"><h2 >Workflows</h2><p >Workflows are models associated to business objects describing their dynamics.
Workflows are also used to track processes that evolve over time.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Almost a workflow</p><p >Add a <code >state</code> field to the <em >Session</em> model. It will be used to define
a workflow-ish.</p><p >A sesion can have three possible states: Draft (default), Confirmed and
Done.</p><p >In the session form, add a (read-only) field to
visualize the state, and buttons to change it. The valid transitions are:</p><ul ><li >Draft -&gt; Confirmed</li><li >Confirmed -&gt; Draft</li><li >Confirmed -&gt; Done</li><li >Done -&gt; Draft</li></ul></div><p >Workflows may be associated with any object in Odoo, and are entirely
customizable. Workflows are used to structure and manage the lifecycles of
business objects and documents, and define transitions, triggers, etc. with
graphical tools. Workflows, activities (nodes or actions) and transitions
(conditions) are declared as XML records, as usual. The tokens that navigate
in workflows are called workitems.</p><div role="alert" class="alert-warning alert"><p class="alert-title">Advertencia</p><p >A workflow associated with a model is only created when the
model's records are created. Thus there is no workflow instance
associated with session instances created before the workflow's
definition</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Workflow</p><p >Replace the ad-hoc <em >Session</em> workflow by a real workflow. Transform the
<em >Session</em> form view so its buttons call the workflow instead of the
model's methods.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Automatic transitions</p><p >Automatically transition sessions from <em >Draft</em> to <em >Confirmed</em> when more
than half the session's seats are reserved.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Server actions</p><p >Replace the Python methods for synchronizing session state by
server actions.</p><p >Both the workflow and the server actions could have been created entirely
from the UI.</p></div></section><section id="security"><h2 >Security</h2><p >Access control mechanisms must be configured to achieve a coherent security
policy.</p></section><section id="group-based-access-control-mechanisms"><h3 >Group-based access control mechanisms</h3><p >Groups are created as normal records on the model <code >res.groups</code>, and granted
menu access via menu definitions. However even without a menu, objects may
still be accessible indirectly, so actual object-level permissions (read,
write, create, unlink) must be defined for groups. They are usually inserted
via CSV files inside modules. It is also possible to restrict access to
specific fields on a view or object using the field's groups attribute.</p></section><section id="access-rights"><h3 >Access rights</h3><p >Access rights are defined as records of the model <code >ir.model.access</code>. Each
access right is associated to a model, a group (or no group for global
access), and a set of permissions: read, write, create, unlink. Such access
rights are usually created by a CSV file named after its model:
<code >ir.model.access.csv</code>.</p><div class="highlight-text"><div class="highlight"><pre><span></span>id,name,model_id/id,group_id/id,perm_read,perm_write,perm_create,perm_unlink
access_idea_idea,idea.idea,model_idea_idea,base.group_user,1,1,1,0
access_idea_vote,idea.vote,model_idea_vote,base.group_user,1,1,1,0
</pre></div>
</div>
<div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Add access control through the OpenERP interface</p><p >Create a new user &quot;John Smith&quot;. Then create a group
&quot;OpenAcademy / Session Read&quot; with read access to the <em >Session</em> model.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Add access control through data files in your module</p><p >Using data files,</p><ul ><li >Create a group <em >OpenAcademy / Manager</em> with full access to all
OpenAcademy models</li><li >Make <em >Session</em> and <em >Course</em> readable by all users</li></ul></div></section><section id="record-rules"><h3 >Record rules</h3><p >A record rule restricts the access rights to a subset of records of the given
model. A rule is a record of the model <code >ir.rule</code>, and is associated to a
model, a number of groups (many2many field), permissions to which the
restriction applies, and a domain. The domain specifies to which records the
access rights are limited.</p><p >Here is an example of a rule that prevents the deletion of leads that are not
in state <code >cancel</code>. Notice that the value of the field <code >groups</code> must follow
the same convention as the method <a href="../reference/orm.html#openerp.models.Model.write" class="internal reference" title="openerp.models.Model.write"><code class="py py-meth xref">write()</code></a> of the ORM.</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;delete_cancelled_only&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.rule&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Only cancelled leads may be deleted<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;model_id&quot;</span> <span class="na">ref=</span><span class="s">&quot;crm.model_crm_lead&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;groups&quot;</span> <span class="na">eval=</span><span class="s">&quot;[(4, ref(&#39;base.group_sale_manager&#39;))]&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;perm_read&quot;</span> <span class="na">eval=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;perm_write&quot;</span> <span class="na">eval=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;perm_create&quot;</span> <span class="na">eval=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;perm_unlink&quot;</span> <span class="na">eval=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;domain_force&quot;</span><span class="nt">&gt;</span>[(&#39;state&#39;,&#39;=&#39;,&#39;cancel&#39;)]<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;/record&gt;</span>
</pre></div>
</div>
<div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Record rule</p><p >Add a record rule for the model Course and the group
&quot;OpenAcademy / Manager&quot;, that restricts <code >write</code> and <code >unlink</code> accesses
to the responsible of a course. If a course has no responsible, all users
of the group must be able to modify it.</p></div></section><section id="wizards"><h2 >Wizards</h2><p >Wizards describe interactive sessions with the user (or dialog boxes) through
dynamic forms. A wizard is simply a model that extends the class
<code class="py xref py-class">TransientModel</code> instead of
<a href="../reference/orm.html#openerp.models.Model" class="internal reference" title="openerp.models.Model"><code class="py xref py-class">Model</code></a>. The class
<code class="py xref py-class">TransientModel</code> extends <a href="../reference/orm.html#openerp.models.Model" class="internal reference" title="openerp.models.Model"><code class="py xref py-class">Model</code></a>
and reuse all its existing mechanisms, with the following particularities:</p><ul ><li >Wizard records are not meant to be persistent; they are automatically deleted
from the database after a certain time. This is why they are called
<em >transient</em>.</li><li >Wizard models do not require explicit access rights: users have all
permissions on wizard records.</li><li >Wizard records may refer to regular records or wizard records through many2one
fields, but regular records <em >cannot</em> refer to wizard records through a
many2one field.</li></ul><p >We want to create a wizard that allow users to create attendees for a particular
session, or for a list of sessions at once.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Define the wizard</p><p >Create a wizard model with a many2one relationship with the <em >Session</em>
model and a many2many relationship with the <em >Partner</em> model.</p></div></section><section id="launching-wizards"><h3 >Launching wizards</h3><p >Wizards are launched by <code >ir.actions.act_window</code> records, with the field
<code >target</code> set to the value <code >new</code>. The latter opens the wizard view into a
popup window. The action may be triggered by a menu item.</p><p >There is another way to launch the wizard: using an <code >ir.actions.act_window</code>
record like above, but with an extra field <code >src_model</code> that specifies in the
context of which model the action is available. The wizard will appear in the
contextual actions of the model, above the main view. Because of some internal
hooks in the ORM, such an action is declared in XML with the tag <code >act_window</code>.</p><div class="xml highlight-python code"><div class="highlight"><pre><span></span>&lt;act_window id=&quot;launch_the_wizard&quot;
            name=&quot;Launch the Wizard&quot;
            src_model=&quot;context_model_name&quot;
            res_model=&quot;wizard_model_name&quot;
            view_mode=&quot;form&quot;
            target=&quot;new&quot;
            key2=&quot;client_action_multi&quot;/&gt;
</pre></div>
</div>
<p >Wizards use regular views and their buttons may use the attribute
<code >special=&quot;cancel&quot;</code> to close the wizard window without saving.</p><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Launch the wizard</p><ol ><li >Define a form view for the wizard.</li><li >Add the action to launch it in the context of the <em >Session</em> model.</li><li >Define a default value for the session field in the wizard; use the
context parameter <code >self._context</code> to retrieve the current session.</li></ol></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Register attendees</p><p >Add buttons to the wizard, and implement the corresponding method for adding
the attendees to the given session.</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Register attendees to multiple sessions</p><p >Modify the wizard model so that attendees can be registered to multiple
sessions.</p></div></section><section id="internationalization"><h2 >Internationalization</h2><p >Each module can provide its own translations within the i18n directory, by
having files named LANG.po where LANG is the locale code for the language, or
the language and country combination when they differ (e.g. pt.po or
pt_BR.po). Translations will be loaded automatically by Odoo for all
enabled languages. Developers always use English when creating a module, then
export the module terms using Odoo's gettext POT export feature
(<span class="menuselection">Settings ‣ Translations ‣ Import/Export ‣ Export
Translation</span> without specifying a language), to create the module template POT
file, and then derive the translated PO files. Many IDE's have plugins or modes
for editing and merging PO/POT files.</p><div role="alert" class="alert-info alert"><p class="alert-title">Truco</p><p >The GNU gettext format (Portable Object) used by Odoo is
integrated into LaunchPad, making it an online collaborative
translation platform.</p></div><div class="highlight-text"><div class="highlight"><pre><span></span>|- idea/ # The module directory
   |- i18n/ # Translation files
      | - idea.pot # Translation Template (exported from Odoo)
      | - fr.po # French translation
      | - pt_BR.po # Brazilian Portuguese translation
      | (...)
</pre></div>
</div>
<div role="alert" class="alert-info alert"><p class="alert-title">Truco</p><p >By default Odoo's POT export only extracts labels inside XML files or
inside field definitions in Python code, but any Python string can be
translated this way by surrounding it with the function <code class="py xref py-func">openerp._()</code>
(e.g. <code >_(&quot;Label&quot;)</code>)</p></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Translate a module</p><p >Choose a second language for your Odoo installation. Translate your
module using the facilities provided by Odoo.</p></div></section><section id="reporting"><h2 >Reporting</h2></section><section id="printed-reports"><h3 >Printed reports</h3><p >Odoo 8.0 comes with a new report engine based on <a href="../reference/qweb.html#reference-qweb" class="internal reference"><span >QWeb</span></a>,
<a href="http://getbootstrap.com" class="external reference">Twitter Bootstrap</a> and <a href="http://wkhtmltopdf.org" class="external reference">Wkhtmltopdf</a>.</p><p >A report is a combination two elements:</p><ul ><li ><p >an <code >ir.actions.report.xml</code>, for which a <code >&lt;report&gt;</code> shortcut element is
provided, it sets up various basic parameters for the report (default
type, whether the report should be saved to the database after generation,…)</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;report</span>
    <span class="na">id=</span><span class="s">&quot;account_invoices&quot;</span>
    <span class="na">model=</span><span class="s">&quot;account.invoice&quot;</span>
    <span class="na">string=</span><span class="s">&quot;Invoices&quot;</span>
    <span class="na">report_type=</span><span class="s">&quot;qweb-pdf&quot;</span>
    <span class="na">name=</span><span class="s">&quot;account.report_invoice&quot;</span>
    <span class="na">file=</span><span class="s">&quot;account.report_invoice&quot;</span>
    <span class="na">attachment_use=</span><span class="s">&quot;True&quot;</span>
    <span class="na">attachment=</span><span class="s">&quot;(object.state in (&#39;open&#39;,&#39;paid&#39;)) and</span>
<span class="s">        (&#39;INV&#39;+(object.number or &#39;&#39;).replace(&#39;/&#39;,&#39;&#39;)+&#39;.pdf&#39;)&quot;</span>
<span class="nt">/&gt;</span>
</pre></div>
</div>
</li><li ><p >A standard <a href="../reference/views.html#reference-views-qweb" class="internal reference"><span >QWeb view</span></a> for the actual report:</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;t</span> <span class="na">t-call=</span><span class="s">&quot;report.html_container&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;t</span> <span class="na">t-foreach=</span><span class="s">&quot;docs&quot;</span> <span class="na">t-as=</span><span class="s">&quot;o&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;t</span> <span class="na">t-call=</span><span class="s">&quot;report.external_layout&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;h2&gt;</span>Report title<span class="nt">&lt;/h2&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/t&gt;</span>
    <span class="nt">&lt;/t&gt;</span>
<span class="nt">&lt;/t&gt;</span>

the standard rendering context provides a number of elements, the most
important being:

``docs``
    the records for which the report is printed
``user``
    the user printing the report
</pre></div>
</div>
</li></ul><p >Because reports are standard web pages, they are available through a URL and
output parameters can be manipulated through this URL, for instance the HTML
version of the <em >Invoice</em> report is available through
<a href="http://localhost:8069/report/html/account.report_invoice/1" class="external reference">http://localhost:8069/report/html/account.report_invoice/1</a> (if <code >account</code> is
installed) and the PDF version through
<a href="http://localhost:8069/report/pdf/account.report_invoice/1" class="external reference">http://localhost:8069/report/pdf/account.report_invoice/1</a>.</p><div role="alert" class="alert-danger alert" id="reference-backend-reporting-printed-reports-pdf-without-styles"><p class="alert-title">Peligro</p><p >If it appears that your PDF report is missing the styles (i.e. the text
appears but the style/layout is different from the html version), probably
your <a href="http://wkhtmltopdf.org" class="external reference alert-link">wkhtmltopdf</a> process cannot reach your web server to download them.</p><p >If you check your server logs and see that the CSS styles are not being
downloaded when generating a PDF report, most surely this is the problem.</p><p >The <a href="http://wkhtmltopdf.org" class="external reference alert-link">wkhtmltopdf</a> process will use the <code >web.base.url</code> system parameter as
the <em >root path</em> to all linked files, but this parameter is automatically
updated each time the Administrator is logged in. If your server resides
behind some kind of proxy, that could not be reachable. You can fix this by
adding one of these system parameters:</p><ul ><li ><code >report.url</code>, pointing to an URL reachable from your server
(probably <code >http://localhost:8069</code> or something similar). It will be
used for this particular purpose only.</li><li ><code >web.base.url.freeze</code>, when set to <code >True</code>, will stop the
automatic updates to <code >web.base.url</code>.</li></ul></div><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Create a report for the Session model</p><p >For each session, it should display session's name, its start and end,
and list the session's attendees.</p></div></section><section id="dashboards"><h3 >Dashboards</h3><div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Define a Dashboard</p><p >Define a dashboard containing the graph view you created, the sessions
calendar view and a list view of the courses (switchable to a form
view). This dashboard should be available through a menuitem in the menu,
and automatically displayed in the web client when the OpenAcademy main
menu is selected.</p></div></section><section id="webservices"><h2 >WebServices</h2><p >The web-service module offer a common interface for all web-services :</p><ul ><li >XML-RPC</li><li >JSON-RPC</li></ul><p >Business objects can also be accessed via the distributed object
mechanism. They can all be modified via the client interface with contextual
views.</p><p >Odoo is accessible through XML-RPC/JSON-RPC interfaces, for which libraries
exist in many languages.</p></section><section id="xml-rpc-library"><h3 >XML-RPC Library</h3><p >The following example is a Python program that interacts with an Odoo
server with the library <code >xmlrpclib</code>:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpclib</span>

<span class="n">root</span> <span class="o">=</span> <span class="s1">&#39;http://</span><span class="si">%s</span><span class="s1">:</span><span class="si">%d</span><span class="s1">/xmlrpc/&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>

<span class="n">uid</span> <span class="o">=</span> <span class="n">xmlrpclib</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;common&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="n">USER</span><span class="p">,</span> <span class="n">PASS</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;Logged in as </span><span class="si">%s</span><span class="s2"> (uid: </span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">USER</span><span class="p">,</span> <span class="n">uid</span><span class="p">)</span>

<span class="c1"># Create a new note</span>
<span class="n">sock</span> <span class="o">=</span> <span class="n">xmlrpclib</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;color&#39;</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s1">&#39;memo&#39;</span> <span class="p">:</span> <span class="s1">&#39;This is a note&#39;</span><span class="p">,</span>
    <span class="s1">&#39;create_uid&#39;</span><span class="p">:</span> <span class="n">uid</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">note_id</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">PASS</span><span class="p">,</span> <span class="s1">&#39;note.note&#39;</span><span class="p">,</span> <span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<div role="alert" class="alert-exercise alert"><p class="alert-title">Exercise</p><p >Add a new service to the client</p><p >Write a Python program able to send XML-RPC requests to a PC running
Odoo (yours, or your instructor's). This program should display all
the sessions, and their corresponding number of seats. It should also
create a new session for one of the courses.</p></div></section><section id="json-rpc-library"><h3 >JSON-RPC Library</h3><p >The following example is a Python program that interacts with an Odoo server
with the standard Python libraries <code >urllib2</code> and <code >json</code>:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">urllib2</span>

<span class="k">def</span> <span class="nf">json_rpc</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000000000</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="n">reply</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">reply</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">reply</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">reply</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">service</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">json_rpc</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="n">service</span><span class="p">,</span> <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="n">args</span><span class="p">})</span>

<span class="c1"># log in the given database</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">/jsonrpc&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="n">uid</span> <span class="o">=</span> <span class="n">call</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;common&quot;</span><span class="p">,</span> <span class="s2">&quot;login&quot;</span><span class="p">,</span> <span class="n">DB</span><span class="p">,</span> <span class="n">USER</span><span class="p">,</span> <span class="n">PASS</span><span class="p">)</span>

<span class="c1"># create a new note</span>
<span class="n">args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;color&#39;</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s1">&#39;memo&#39;</span> <span class="p">:</span> <span class="s1">&#39;This is another note&#39;</span><span class="p">,</span>
    <span class="s1">&#39;create_uid&#39;</span><span class="p">:</span> <span class="n">uid</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">note_id</span> <span class="o">=</span> <span class="n">call</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;execute&quot;</span><span class="p">,</span> <span class="n">DB</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">PASS</span><span class="p">,</span> <span class="s1">&#39;note.note&#39;</span><span class="p">,</span> <span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p >Here is the same program, using the library
<a href="https://pypi.python.org/pypi/jsonrpclib" class="external reference">jsonrpclib</a>:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jsonrpclib</span>

<span class="c1"># server proxy object</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">/jsonrpc&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">jsonrpclib</span><span class="o">.</span><span class="n">Server</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># log in the given database</span>
<span class="n">uid</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="s2">&quot;common&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;login&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">DB</span><span class="p">,</span> <span class="n">USER</span><span class="p">,</span> <span class="n">PASS</span><span class="p">])</span>

<span class="c1"># helper function for invoking model methods</span>
<span class="k">def</span> <span class="nf">invoke</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">DB</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">PASS</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">method</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">server</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;execute&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>

<span class="c1"># create a new note</span>
<span class="n">args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;color&#39;</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s1">&#39;memo&#39;</span> <span class="p">:</span> <span class="s1">&#39;This is another note&#39;</span><span class="p">,</span>
    <span class="s1">&#39;create_uid&#39;</span><span class="p">:</span> <span class="n">uid</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">note_id</span> <span class="o">=</span> <span class="n">invoke</span><span class="p">(</span><span class="s1">&#39;note.note&#39;</span><span class="p">,</span> <span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p >Examples can be easily adapted from XML-RPC to JSON-RPC.</p><div role="alert" class="alert-info alert"><p class="alert-title">Nota</p><p >There are a number of high-level APIs in various languages to access Odoo
systems without <em >explicitly</em> going through XML-RPC or JSON-RPC, such as:</p><ul ><li ><a href="https://github.com/akretion/ooor" class="external reference alert-link">https://github.com/akretion/ooor</a></li><li ><a href="https://github.com/syleam/openobject-library" class="external reference alert-link">https://github.com/syleam/openobject-library</a></li><li ><a href="https://github.com/nicolas-van/openerp-client-lib" class="external reference alert-link">https://github.com/nicolas-van/openerp-client-lib</a></li><li ><a href="https://pypi.python.org/pypi/oersted/" class="external reference alert-link">https://pypi.python.org/pypi/oersted/</a></li><li ><a href="https://github.com/abhishek-jaiswal/php-openerp-lib" class="external reference alert-link">https://github.com/abhishek-jaiswal/php-openerp-lib</a></li></ul></div><div class="footnote" id="autofields"><span class="footnote-label"><a class="footnote-backref" href="#id2">[1]</a></span> it is possible to <a href="../reference/orm.html#openerp.models.Model._log_access" class="internal reference" title="openerp.models.Model._log_access"><code class="py xref py-attr">disable the automatic creation of some
fields</code></a></div><div class="footnote" id="rawsql"><span class="footnote-label"><a class="footnote-backref" href="#id1">[2]</a></span> writing raw SQL queries is possible, but requires care as it
bypasses all Odoo authentication and security mechanisms.</div></section>

      </article>
    </div>
    
    <div id="mask"></div>
  </main>

  <div class="floating_action_container">
    <a id="floating_action" class="ripple" href="#">
      <i class="mdi-action-explore"></i>
    </a>
    <div id="floating_action_menu">
      <span class="bubble"></span>
      <ul class="list-group content">
        <li class="list-group-item ripple"><a>Cras justo odio</a></li>
        <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
        <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
        <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
        <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
      </ul>
    </div>
  </div>
  </body>
</html>